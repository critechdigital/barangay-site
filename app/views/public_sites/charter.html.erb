<% content_for(:title) { "Citizen's Charter ‚Äî #{@site.name}" } %>

<div class="bg-blue-50 border-b border-blue-100 py-6">
  <div class="max-w-6xl mx-auto px-4">
    <h1 class="text-2xl font-bold text-blue-900">Citizen's Charter</h1>
    <p class="text-gray-600 mt-1">In compliance with <strong>Republic Act No. 9485</strong> (Anti-Red Tape Act of 2007) as amended by <strong>RA 11032</strong> (Ease of Doing Business Act of 2018)</p>
  </div>
</div>

<div class="max-w-6xl mx-auto px-4 py-8">
  <!-- Introduction -->
  <div class="bg-white border border-gray-200 rounded-lg p-6 mb-8">
    <h2 class="font-bold text-lg text-blue-900 mb-3">About the Citizen's Charter</h2>
    <p class="text-gray-600 text-sm leading-relaxed">
      The Citizen's Charter is a document that communicates the service standards of the barangay
      to its constituents. It provides information on the step-by-step procedure for availing of
      barangay services, the documents required, fees to be paid, processing time, and the person
      responsible. This ensures transparency, accountability, and efficiency in the delivery of
      public services.
    </p>
  </div>

  <!-- Services with Steps -->
  <% if @services.any? %>
    <div class="space-y-6">
      <% @services.each_with_index do |service, idx| %>
        <div class="bg-white border border-gray-200 rounded-lg overflow-hidden" id="service-<%= service.id %>">
          <!-- Service Header -->
          <div class="bg-blue-900 text-white p-5">
            <div class="flex justify-between items-start">
              <div>
                <span class="text-xs bg-blue-700 px-2 py-1 rounded uppercase font-medium"><%= service.category %></span>
                <h3 class="text-lg font-bold mt-2"><%= service.name %></h3>
                <% if service.description.present? %>
                  <p class="text-blue-200 text-sm mt-1"><%= service.description %></p>
                <% end %>
              </div>
              <div class="text-right text-sm">
                <div class="text-blue-200">Processing Time</div>
                <div class="font-bold"><%= service.processing_time %></div>
              </div>
            </div>
          </div>

          <!-- Service Details -->
          <div class="p-5">
            <div class="grid md:grid-cols-3 gap-6 mb-6">
              <div>
                <h4 class="text-xs font-bold text-gray-500 uppercase mb-2">Fees</h4>
                <p class="text-sm font-medium"><%= service.fees %></p>
              </div>
              <div>
                <h4 class="text-xs font-bold text-gray-500 uppercase mb-2">Requirements</h4>
                <p class="text-sm"><%= service.requirements %></p>
              </div>
              <div>
                <h4 class="text-xs font-bold text-gray-500 uppercase mb-2">Processing Time</h4>
                <p class="text-sm"><%= service.processing_time %></p>
              </div>
            </div>

            <!-- Step-by-Step Process -->
            <% if service.service_steps.any? %>
              <h4 class="text-xs font-bold text-gray-500 uppercase mb-4">Step-by-Step Process</h4>
              <div class="relative">
                <% service.service_steps.each do |step| %>
                  <div class="flex gap-4 mb-4 last:mb-0">
                    <!-- Step Number -->
                    <div class="flex-shrink-0">
                      <div class="w-10 h-10 rounded-full bg-blue-100 text-blue-800 flex items-center justify-center font-bold text-sm border-2 border-blue-300">
                        <%= step.step_number %>
                      </div>
                      <% unless step == service.service_steps.last %>
                        <div class="w-0.5 h-6 bg-blue-200 mx-auto mt-1"></div>
                      <% end %>
                    </div>
                    <!-- Step Content -->
                    <div class="flex-1 pb-2">
                      <h5 class="font-bold text-sm"><%= step.title %></h5>
                      <% if step.description.present? %>
                        <p class="text-gray-600 text-xs mt-1"><%= step.description %></p>
                      <% end %>
                      <div class="flex gap-4 mt-2 text-xs text-gray-500">
                        <% if step.responsible_person.present? %>
                          <span>üë§ <%= step.responsible_person %></span>
                        <% end %>
                        <% if step.location.present? %>
                          <span>üìç <%= step.location %></span>
                        <% end %>
                        <% if step.duration.present? %>
                          <span>‚è± <%= step.duration %></span>
                        <% end %>
                        <% if step.fees.present? %>
                          <span>üí∞ <%= step.fees %></span>
                        <% end %>
                      </div>
                    </div>
                  </div>
                <% end %>
              </div>
            <% else %>
              <div class="bg-gray-50 rounded-lg p-4 text-center text-gray-400 text-sm">
                <p>Detailed step-by-step process coming soon.</p>
                <p class="text-xs mt-1">Please visit the Barangay Hall for the complete procedure.</p>
              </div>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <div class="bg-white border border-gray-200 rounded-lg p-8 text-center text-gray-400">
      <p>Citizen's Charter is being prepared. Please check back soon.</p>
    </div>
  <% end %>
</div>
