<% content_for(:title) { "Step 5: Preview & Publish â€” BarangaySite" } %>
<%= render "wizard_nav", current_step: 5 %>

<div class="max-w-2xl mx-auto px-4">
  <h2 class="text-2xl font-bold mb-2">Ready to go live? ðŸŽ‰</h2>
  <p class="text-gray-500 mb-8">Here's a summary of your site. Hit publish when you're happy with it.</p>

  <!-- Summary Card -->
  <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden mb-8">
    <div class="bg-blue-700 text-white p-6">
      <h3 class="text-2xl font-bold"><%= @site.name || "Untitled Barangay" %></h3>
      <p class="text-blue-200 mt-1"><%= @site.tagline %></p>
      <p class="text-blue-100 text-sm mt-2">
        <%= [@site.barangay, @site.municipality, @site.province, @site.region].compact_blank.join(", ") %>
      </p>
    </div>

    <div class="p-6 space-y-6">
      <!-- Officials -->
      <div>
        <h4 class="font-bold text-gray-700 mb-2">ðŸ‘¥ Officials (<%= @site.officials.count %>)</h4>
        <% if @site.officials.any? %>
          <div class="grid grid-cols-2 gap-2">
            <% @site.officials.each do |o| %>
              <div class="text-sm">
                <span class="font-medium"><%= o.name.presence || "â€”" %></span>
                <span class="text-gray-400"> Â· <%= o.position %></span>
              </div>
            <% end %>
          </div>
        <% else %>
          <p class="text-gray-400 text-sm">No officials added yet</p>
        <% end %>
      </div>

      <!-- Services -->
      <div>
        <h4 class="font-bold text-gray-700 mb-2">ðŸ“‹ Services (<%= @site.services.count %>)</h4>
        <% if @site.services.any? %>
          <div class="flex flex-wrap gap-2">
            <% @site.services.each do |s| %>
              <span class="bg-blue-50 text-blue-700 px-3 py-1 rounded-full text-xs font-medium"><%= s.name %></span>
            <% end %>
          </div>
        <% else %>
          <p class="text-gray-400 text-sm">No services added yet</p>
        <% end %>
      </div>

      <!-- Contact -->
      <div>
        <h4 class="font-bold text-gray-700 mb-2">ðŸ“ž Contact</h4>
        <div class="text-sm text-gray-600 space-y-1">
          <p><%= @site.address.presence || "No address" %></p>
          <p><%= @site.phone.presence || "No phone" %> Â· <%= @site.email.presence || "No email" %></p>
          <p><%= @site.office_hours.presence || "No office hours" %></p>
        </div>
      </div>
    </div>
  </div>

  <!-- Publish -->
  <div class="flex gap-4">
    <%= link_to "â† Back to Contact", contact_setup_path, class: "flex-1 py-3 text-center border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-50" %>
    <%= button_to "ðŸš€ Publish My Site!", publish_setup_path, method: :patch, class: "flex-1 py-3 bg-green-600 text-white font-bold rounded-lg hover:bg-green-700 cursor-pointer text-lg" %>
  </div>

  <p class="text-center text-gray-400 text-sm mt-4">
    Your site will be live at <strong><%= @site.public_url %></strong>
  </p>
</div>
